<?xml version="1.0" encoding="utf-8" ?>
<!--
This is the integration tests app config file that will have the configuration sections replaced by the targetted test environment at build time.

To run the integration tests locally you need to edit the following attributes
 - aderant/instanceMetadataConfigurationSection@environment             Environment name
 - aderant/instanceMetadataConfigurationSection/repository@name         Expert DB name
 - aderant/instanceMetadataConfigurationSection/repository@server       Expert DB server and instance
 - aderant/instanceMetadataConfigurationSection/expertShare@uri         Path to expert share
 - aderant/instanceMetadataConfigurationSection/queryService@uri        Query service uri
 - system.serviceModel/client/endpoint@address                          All service addresses need to be updated if you use non
                                                                        default port, and if environment <> 'Local'
-->
<configuration>
  <configSections>
    <sectionGroup name="aderant">
      <section name="instanceMetadataConfigurationSection" type="Aderant.Framework.Deployment.InstanceMetadataConfigurationSection, Aderant.Framework, Version=1.8.0.0, Culture=neutral, PublicKeyToken=41b332442f1101cc" allowLocation="true" allowDefinition="Everywhere" />
    </sectionGroup>
  </configSections>
  <!-- Connection string required for messaging integration tests -->
  <!-- Build server will populate this section with environment details -->
  <connectionStrings />    
  <aderant>
    <!-- Build server will populate this section with environment details -->
    <instanceMetadataConfigurationSection />
  </aderant>
  <runtime>
    <loadFromRemoteSources enabled="true" />
  </runtime>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Aderant.DevelopmentTools.PackageService.PackageServiceBehavior">
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="False"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="True" />
        </behavior>        
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="LargeQuotaBehavior">
          <dataContractSerializer maxItemsInObjectGraph="2147483600" />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="expertBasicHttpBinding" 
                 maxReceivedMessageSize="2147483647">
          <readerQuotas maxArrayLength="2147483647" 
                        maxStringContentLength="2147483647" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" 
                       proxyCredentialType="Windows">
              <extendedProtectionPolicy policyEnforcement="Never" />
            </transport>
          </security>
        </binding>
      </basicHttpBinding>
      <netTcpBinding>
        <binding name="Aderant_NetTcp"
             closeTimeout="00:01:00"
             openTimeout="00:01:00"
             receiveTimeout="00:10:00"
             sendTimeout="00:01:00"
             transactionFlow="false"
             transferMode="Buffered"
             transactionProtocol="OleTransactions"
             hostNameComparisonMode="StrongWildcard"
             listenBacklog="10"
             maxBufferPoolSize="524288"
             maxBufferSize="99999998"
             maxConnections="100"
             maxReceivedMessageSize="99999998">
          <readerQuotas maxDepth="32"
                  maxStringContentLength="2000192"
                  maxArrayLength="16384"
                  maxBytesPerRead="4096"
                  maxNameTableCharCount="16384" />
          <reliableSession ordered="true"
                   inactivityTimeout="00:10:00"
                   enabled="true" />
          <security mode="Transport">
            <transport clientCredentialType="Windows"
                       protectionLevel="EncryptAndSign" />
            <message clientCredentialType="Windows" />
          </security>
        </binding>
      </netTcpBinding>
      <netNamedPipeBinding>
        <binding name="Aderant_NamedPipe"
                 maxReceivedMessageSize="2147483647">
          <readerQuotas maxStringContentLength="2147483647"
                        maxArrayLength="2147483647" />
        </binding>
      </netNamedPipeBinding>
    </bindings>
    <!-- Build server will populate this section with environment details -->
    <client>
      <endpoint name="ReportingService" address="http://svsql304/ReportServer_MSSQL10/ReportService2010.asmx" binding="basicHttpBinding" bindingConfiguration="expertBasicHttpBinding" contract="Aderant.Framework.Reporting.ServiceProxy.ReportingService.IReportingService2010Soap">
        <identity>
          <servicePrincipalName value="Host/VMEXPDEVB309.ap.aderant.com" />
        </identity>
      </endpoint>    
    </client>
  </system.serviceModel>
</configuration>
