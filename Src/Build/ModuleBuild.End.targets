<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003"
         DefaultTargets="AfterModuleBuild"
         ToolsVersion="14.0">
         
         
  <Import Project="$(DirectoryBuildFile)" />
  <Import Project="Aderant.Build.Common.targets" />
  <Import Project="RM.TransformTemplates.Targets" />
  <Import Project="Aderant.TextTransform.targets" />

  <!--
    ==========================================================================================
        Unit Test 
    ==========================================================================================
  -->

    <PropertyGroup>
        <BinTestDirectory>$(SolutionDirectoryPath)Bin\Test\</BinTestDirectory>
    </PropertyGroup>


    <Target Name="AfterModuleBuild">
        <ItemGroup>
            <TestAssemblies Include="$(BinTestDirectory)*UnitTest*.dll;
                               $(BinTestDirectory)*.Tests.ps1;"
                Exclude="$(BinTestDirectory)*Helpers*.dll;
                               $(BinTestDirectory)Microsoft.*" />
            <IntegrationTestAssemblies Include="$(BinTestDirectory)*IntegrationTest*.dll" />
        </ItemGroup>

        <CallTarget Targets="RunTests" />
    </Target>

  <Target Name="OnTestFailure">
      <CallTarget Targets=""/>
  </Target>


  </Project>
